{
  "journey": {
    "id": "password-reset",
    "name": "Reset Password (Forgot Password)",
    "priority": "low",
    "userType": "registered_not_authenticated",
    "frequency": "occasional",
    "businessImpact": "Account recovery, security",
    "preconditions": ["User is not authenticated", "User has valid email account"],
    "steps": [
      {
        "stepNumber": 1,
        "name": "Navigate to Login Page",
        "page": "/login",
        "action": "navigate",
        "selectors": {
          "primary": "[data-testid='login-page']",
          "fallback": "form.login-form"
        },
        "expectedResult": "Login page loads",
        "assertions": ["URL is /login", "Login form visible", "Forgot Password link visible"]
      },
      {
        "stepNumber": 2,
        "name": "Click Forgot Password Link",
        "page": "/login",
        "action": "click",
        "selectors": {
          "primary": "[data-testid='forgot-password-link']",
          "fallback": "a:has-text('Forgot Password')"
        },
        "expectedResult": "Password reset form opens",
        "assertions": ["URL changes to /forgot-password", "Email input visible", "Submit button visible"]
      },
      {
        "stepNumber": 3,
        "name": "Enter Email Address",
        "page": "/forgot-password",
        "action": "fill",
        "selectors": {
          "primary": "[data-testid='reset-email-input']",
          "fallback": "input[type='email']"
        },
        "inputData": {"email": "user@example.com", "type": "email"},
        "expectedResult": "Email field populated",
        "assertions": ["Email displays in field", "Valid format"]
      },
      {
        "stepNumber": 4,
        "name": "Submit Reset Request",
        "page": "/forgot-password",
        "action": "click",
        "selectors": {
          "primary": "[data-testid='send-reset-button']",
          "fallback": "button:has-text('Send Reset')"
        },
        "expectedResult": "Reset email sent",
        "assertions": ["Loading indicator shows", "Success message displays", "Email sent confirmation"]
      },
      {
        "stepNumber": 5,
        "name": "Check Email for Reset Link",
        "page": "/forgot-password",
        "action": "wait_for_email",
        "expectedResult": "Reset email received",
        "assertions": ["Email contains reset link", "Link has expiration time", "Instructions clear"]
      },
      {
        "stepNumber": 6,
        "name": "Click Reset Link in Email",
        "page": "/reset-password",
        "action": "navigate",
        "selectors": {
          "primary": "[data-testid='reset-form']",
          "fallback": "form.reset-form"
        },
        "expectedResult": "Password reset form opens",
        "assertions": ["URL contains reset token", "New password field visible", "Confirm password field visible"]
      },
      {
        "stepNumber": 7,
        "name": "Enter New Password",
        "page": "/reset-password",
        "action": "fill",
        "selectors": {
          "primary": "[data-testid='new-password-input']",
          "fallback": "input[name='password']"
        },
        "inputData": {"password": "NewSecurePass123!", "type": "password"},
        "expectedResult": "Password field populated",
        "assertions": ["Field shows masked input", "Password strength indicator shows"]
      },
      {
        "stepNumber": 8,
        "name": "Confirm New Password",
        "page": "/reset-password",
        "action": "fill",
        "selectors": {
          "primary": "[data-testid='confirm-password-input']",
          "fallback": "input[name='confirmPassword']"
        },
        "inputData": {"confirmPassword": "NewSecurePass123!", "type": "password"},
        "expectedResult": "Confirmation field populated",
        "assertions": ["Masked input shows", "Passwords match validation"]
      },
      {
        "stepNumber": 9,
        "name": "Submit Password Reset",
        "page": "/reset-password",
        "action": "click",
        "selectors": {
          "primary": "[data-testid='reset-submit-button']",
          "fallback": "button:has-text('Reset Password')"
        },
        "expectedResult": "Password updated",
        "assertions": ["Loading indicator shows", "Success message displays"]
      },
      {
        "stepNumber": 10,
        "name": "Redirect to Login",
        "page": "/login",
        "action": "wait_for_navigation",
        "expectedResult": "Redirected to login with new credentials",
        "assertions": ["URL is /login", "Can login with new password"]
      }
    ],
    "successOutcome": {
      "description": "User password successfully reset and can login",
      "finalState": "password_reset_complete",
      "finalPage": "/login"
    },
    "alternativePaths": [
      {
        "name": "Resend Reset Email",
        "trigger": "User didn't receive email",
        "outcome": "Resend button available on confirmation page"
      }
    ],
    "errorCases": [
      {
        "name": "Email Not Found",
        "trigger": "Email not registered",
        "expectedBehavior": "Generic message for security",
        "errorSelector": "[data-testid='email-not-found-message']",
        "errorMessage": "If email exists, reset link sent",
        "recovery": "User checks email or signs up"
      },
      {
        "name": "Reset Link Expired",
        "trigger": "User waits too long to use link",
        "expectedBehavior": "Expiration error",
        "errorSelector": "[data-testid='link-expired-error']",
        "errorMessage": "Reset link has expired",
        "recovery": "User requests new reset link"
      },
      {
        "name": "Passwords Don't Match",
        "trigger": "Password and confirm don't match",
        "expectedBehavior": "Validation error",
        "errorSelector": "[data-testid='password-mismatch-error']",
        "errorMessage": "Passwords do not match",
        "recovery": "User re-enters matching passwords"
      },
      {
        "name": "Password Too Weak",
        "trigger": "Password doesn't meet requirements",
        "expectedBehavior": "Validation error",
        "errorSelector": "[data-testid='password-weak-error']",
        "errorMessage": "Password must contain uppercase, lowercase, number, special char",
        "recovery": "User enters stronger password"
      },
      {
        "name": "Invalid Reset Token",
        "trigger": "Link was tampered with",
        "expectedBehavior": "Security error",
        "errorSelector": "[data-testid='invalid-token-error']",
        "errorMessage": "Invalid or tampered reset link",
        "recovery": "User requests new reset"
      }
    ],
    "selectorImprovements": [
      {
        "element": "Forgot password link",
        "current": "a:has-text('Forgot Password')",
        "recommendation": "Add data-testid='forgot-password-link'",
        "reason": "Specific link identifier"
      },
      {
        "element": "Email input",
        "current": "input[type='email']",
        "recommendation": "Add data-testid='reset-email-input'",
        "reason": "Specific email field"
      },
      {
        "element": "Send reset button",
        "current": "button:has-text('Send Reset')",
        "recommendation": "Add data-testid='send-reset-button'",
        "reason": "Unique send button"
      },
      {
        "element": "New password input",
        "current": "input[name='password']",
        "recommendation": "Add data-testid='new-password-input'",
        "reason": "Specific new password field"
      }
    ]
  }
}
